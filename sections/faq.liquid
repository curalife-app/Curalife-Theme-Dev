
{% if section.settings.faq_data %}
  {% assign faq_data = section.settings.faq_data | split: "|" %}
{% else %}
  {% assign faq_data = product.metafields.custom.faq.value | json %}
{% endif %}

{% if faq_data.size %}
  {% render 'product-faq-section',
    bgColor: section.settings.bg_color,
    titles_color: section.settings.titles_color,
    title: section.settings.title,
    main_image: section.settings.main_image,
    is_ingredients_feature: section.settings.is_ingredients_feature,
    is_allow_one_open: section.settings.is_allow_one_open,
    faqItems: data
  %}
{% endif %}

{% schema %}
{
    "name": "FAQ",
    "disabled_on": {
      "groups": [
        "header",
        "footer"
      ]
    },
    "settings": [
      {
        "type": "color",
        "id": "bg_color",
        "label": "Background Color"
      },
      {
        "type": "color",
        "id": "titles_color",
        "label": "Titles Color"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "richtext",
        "id": "faq_data",
        "label": "FAQ Data"
      },
      {
        "type": "image_picker",
        "id": "main_image",
        "label": "Image"
      },
      {
        "type": "checkbox",
        "id": "is_ingredients_feature",
        "label": "Enable Ingredients Feature"
      },
      {
        "type": "checkbox",
        "id": "is_allow_one_open",
        "label": "Allow only one answer open at a time"
      }
    ],
    "presets": [
    {
      "name": "FAQ"
    }
  ]
}
{% endschema %}