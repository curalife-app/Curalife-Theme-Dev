<section class="weight-loss-calculator">
  <h2>{{ section.settings.title }}</h2>
  <div class="weight-display">
    <span>Your current weight</span>
    <span class="current-weight" id="currentWeight">150 lbs</span>
  </div>
  <input type="range"
          min="{{ section.settings.min_weight }}"
          max="{{ section.settings.max_weight }}"
          value="150"
          class="slider"
          id="weightSlider">
  <div class="result">
    <p>Estimated weight loss in 3 months:</p>
    <p class="result-value" id="weightLoss">22 lbs</p>
  </div>
</section>

<style>
  .weight-loss-calculator {
    background: linear-gradient(180deg, #F7F7F4 40.95%, #9F9D5E 190.95%);
    border-radius: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
    width: 300px;
    margin: 0 auto;
  }
  .weight-loss-calculator h2 {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 20px;
  }
  .weight-display {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  .current-weight {
    font-size: 1.5em;
    font-weight: bold;
  }
  .slider {
    width: 100%;
    margin-bottom: 20px;
  }
  .result {
    background-color: #f0f0f0;
    padding: 10px;
    border-radius: 4px;
  }
  .result-value {
    font-size: 1.5em;
    font-weight: bold;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('weightSlider');
    const currentWeight = document.getElementById('currentWeight');
    const weightLoss = document.getElementById('weightLoss');

    function calculateWeightLoss(weight) {
      // This is a simplified calculation and should not be considered medical advice
      const potentialLoss = Math.round(weight * 0.15);
      return Math.min(potentialLoss, 39); // Cap at 39 lbs for this example
    }

    function updateWeightLoss() {
      const weight = slider.value;
      currentWeight.textContent = `${weight} lbs`;
      weightLoss.textContent = `${calculateWeightLoss(weight)} lbs`;
    }

    slider.addEventListener('input', updateWeightLoss);
    updateWeightLoss(); // Initial calculation
  });
</script>

{% schema %}
  {
    "name": "Weight Loss Calculator",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Widget Title",
        "default": "Weight Loss Estimator"
      },
      {
        "type": "range",
        "id": "min_weight",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "lbs",
        "label": "Minimum Weight",
        "default": 100
      },
      {
        "type": "range",
        "id": "max_weight",
        "min": 200,
        "max": 500,
        "step": 10,
        "unit": "lbs",
        "label": "Maximum Weight",
        "default": 400
      }
    ],
    "presets": [
      {
        "name": "Weight Loss Calculator",
        "category": "Custom"
      }
    ]
  }
  {% endschema %}