<section>
  <div class="container">
    <div class="wrapper">
      <img class="absolute z-[-1]" src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/plant.png?v=1723546241" alt="Curaslim 2024 plant">

      <div class="weight-loss-calculator">
        <div class="weight-display flex justify-between items-center">
          <div class="weight-title flex items-center gap-2 font-bold">
            <img src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/wightloss-icons.png?v=1723544732" alt="weight loss">
            <span>Your current<br>weight</span>
          </div>

          <span class="current-weight text-lg" id="currentWeight">150 <span class="text-sm">lbs</span></span>
        </div>

        <div class="slider-container">
          <input type="range" min="{{ section.settings.min_weight }}" max="{{ section.settings.max_weight }}" value="150" class="slider" id="weightSlider">
        </div>

        <div class="result flex items-center justify-between">
          <div class="left">
            <div><strong>Weight you could lose</strong> (Ibs)</div>
            <div class="bg-[--orange] italic rounded-full px-2 py-1 mt-1 w-fit">With Curaslim</div>
          </div>
          <div class="result-value text-[--curaslim] text-lg" id="weightLoss">22 <span class="text-sm">lbs</span></div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .weight-loss-calculator {
    border-radius: 24px;
    background: linear-gradient(180deg, #F7F7F4 40.95%, #9F9D5E 190.95%);
    box-shadow: 0px 16px 32px 0px rgba(18, 18, 18, 0.10);
    padding: 50px 90px;
    width: 800px;
    margin: 0 auto;
  }

  .weight-display {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  .current-weight {
    font-size: 44px;
    font-weight: bold;
  }

  .slider-container {
    position: relative;
    width: 100%;
    margin-bottom: 20px;
    padding-block: 1rem;
  }

  .slider {
    -webkit-appearance: none;
    width: 100%;
    height: 5px;
    background: #BBB86F;
    outline: none;
    opacity: 0.7;
    transition: opacity .2s;
    cursor: pointer;
  }

  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 67px;
    height: 67px;
    background: url('https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-icon.png?v=1723546176') no-repeat center center;
    background-size: cover;
    cursor: pointer;
  }

  .slider::-moz-range-thumb {
    width: 67px;
    height: 67px;
    background: url('https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-icon.png?v=1723546176') no-repeat center center;
    background-size: cover;
    cursor: pointer;
    border: none;
  }

  .result {
    background-color: white;
    padding: 1rem;
    border-radius: 15px;
  }

  .result-value {
    font-size: 44px;
    font-weight: bold;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('weightSlider');
    const currentWeight = document.getElementById('currentWeight');
    const weightLoss = document.getElementById('weightLoss');

    function calculateWeightLoss(weight) {
      // This is a simplified calculation and should not be considered medical advice
      const potentialLoss = Math.round(weight * 0.15);
      return Math.min(potentialLoss, 39); // Cap at 39 lbs for this example
    }

    function updateWeightLoss() {
      const weight = slider.value;
      currentWeight.innerHTML = `${weight} <span class="text-sm">lbs</span>`;
      weightLoss.innerHTML = `${calculateWeightLoss(weight)} <span class="text-sm">lbs</span>`;
    }

    slider.addEventListener('input', updateWeightLoss);
    updateWeightLoss();
  });
</script>

{% schema %}
{
  "name": "Weight Loss Calculator",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Widget Title",
      "default": "Weight Loss Estimator"
    },
    {
      "type": "range",
      "id": "min_weight",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "lbs",
      "label": "Minimum Weight",
      "default": 100
    },
    {
      "type": "range",
      "id": "max_weight",
      "min": 200,
      "max": 500,
      "step": 10,
      "unit": "lbs",
      "label": "Maximum Weight",
      "default": 400
    }
  ],
  "presets": [
    {
      "name": "Weight Loss Calculator",
      "category": "Custom"
    }
  ]
}
{% endschema %}