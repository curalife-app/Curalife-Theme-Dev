<section class="capsule-animation-section">
  <div class="container">
    {% render 'title', section_id: section.id, title: '<span>One Capsule,</span> Triple Action', title_tag: 'h2', subtitle: '100% Natural, No Shots, No Chemicals', span_color: section.settings.title_highlight_color, padding_bottom: '30', padding_top: 0 %}

    <div class="view capsule-animation">
      <div class="pill relative flex justify-center">
        <img class="pill-half left m-0" src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-half.png?v=1723722706" alt="Curaslim 2024 Capsule Animation Pill Half">
        <img class="pill-half right m-0 scale-x-[-1]" src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-half.png?v=1723722706" alt="Curaslim 2024 Capsule Animation Pill Half">
      </div>

      <div class="fallen-items">
        <div class="fallen-item bg-blue">
          <div class="h6">Suppress Your Appetite</div>
          <div>Feel fuller faster & for longer</div>
        </div>

        <div class="fallen-item bg-purple">
          <div class="h6">Suppress Your Appetite</div>
          <div>Feel fuller faster & for longer</div>
        </div>

        <div class="fallen-item bg-yellow">
          <div class="h6">Suppress Your Appetite</div>
          <div>Feel fuller faster & for longer</div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
        main {
            overflow: clip !important;
        }

        .capsule-animation-section {
            overflow: clip !important;
        }

        .capsule-animation {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: start;
            min-height: 1000px;
        }

        .pill {
            position: relative;
            z-index: 2;
        }

        .pill-half.left {
            animation: openPillLeft linear;
            animation-timeline: view();
            animation-range: entry 50%;
        }

        .pill-half.right {
            animation: openPillRight linear;
            animation-timeline: view();
            animation-range: entry 50%;
        }

        @keyframes openPillLeft {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(150deg);
            }
        }

        @keyframes openPillRight {
            from {
                transform: rotate(180deg);
            }
            to {
                transform: rotate(30deg);
            }
        }

        .fallen-items {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            width: 300px; /* Adjust based on your layout */
            height: 300px; /* Adjust based on your layout */
        }

        .fallen-item {
            position: absolute;
            opacity: 0;
            transform: translateY(-50px);
            animation: fallAnimation linear;
            animation-timeline: view();
            animation-range: cover 30% cover 100%;
            width: 100px; /* Adjust based on your content */
            text-align: center;
        }

        .fallen-item:nth-child(1) {
            animation-name: fallAnimationLeft;
        }

        .fallen-item:nth-child(2) {
            animation-name: fallAnimationCenter;
            animation-delay: 0.1s;
        }

        .fallen-item:nth-child(3) {
            animation-name: fallAnimationRight;
            animation-delay: 0.2s;
        }

        @keyframes fallAnimationLeft {
            0% {
                opacity: 0;
                transform: translate(100%, 0px)
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(-30%, 500px)
            }
        }

        @keyframes fallAnimationCenter {
            0% {
                opacity: 0;
                transform: translate(100%, 0px)
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(120%, 600px)
            }
        }

        @keyframes fallAnimationRight {
            0% {
                opacity: 0;
                transform: translate(100%, 0px)
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(200%, 400px)
            }
        }
    </style>

{% schema %}
  {
    "name": "Capsule Animation",
    "settings": [],
    "presets": [
      {
        "category": "Page",
        "name": "Capsule Animation"
      }
    ]
  }
{% endschema %}
