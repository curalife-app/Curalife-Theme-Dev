<section class="results-widget">
    <div class="!mbl:overflow-visible container">
        <img src="//curalife.com/cdn/shop/files/People-icons-1.png?v=1723478548" alt="people icons">
        <h2>This Is About So Much More Than <br><span>Just Losing Weight.</span></h2>
        <p>1000 Curaslim customers swear by its results.</p>

        <div class="tabs !mbl:overflow-visible">
            <div class="tab active" data-tab="weight-loss">Weight Loss</div>
            <div class="tab" data-tab="hunger-reduction">Hunger Reduction</div>
            <div class="tab" data-tab="energy-levels">Energy Levels</div>
            <div class="tab" data-tab="appetite-control">Appetite Control</div>
            <div class="tab" data-tab="fullness">Fullness</div>
        </div>

        <div id="content" class="content">
            <!-- Content will be dynamically inserted here -->
        </div>
    </div>
</section>

<script>
    const tabData = {
        'weight-loss': {
            '3': {
                text: 'Approximately 93% of participants reported losing more than 7.5% of body weight in 3 months.',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/weight_loss.png?v=1723553190'
            },
            '6': {
                text: 'Approximately 92% of participants using Curaslim for 6 months reported losing more than 11.7% of body weight.',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/phone.png?v=1723553165'
            }
        },
        'hunger-reduction': {
            '3': {
                text: 'Nearly all users (97%) noticed a substantial reduction in hunger, making it easier to manage cravings and stick to a healthy eating plan.',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/woman.png?v=1723972716'
            }
        },
        'energy-levels': {
            '6': {
                text: 'Users felt more energized, with 94% reporting a noticeable boost in their energy levels after 6 months, helping them stay active and motivated',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/weights.png?v=1723972716'
            }
        },
        'appetite-control': {
            '1': {
                text: 'With 91% finding it highly effective to control appetite, Curaslim helps you control your meals, reducing the tendency to overeat.',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/apple.png?v=1723972717'
            }
        },
        'fullness': {
            '1': {
                text: '90% of surveyed clients reported an increased feeling of fullness, which supports portion control and prevents snacking.',
                image: 'https://cdn.shopify.com/s/files/1/0452/2459/1511/files/curaslim-bottle-results.png?v=1723972717'
            }
        }
    };

    function createUsageSection(period, data) {
        return `
            <div class="usage-section">
                <div class="months-usage">
                    <div class="usage">${period}</div>
                    <div>${period === '1' ? 'month usage' : 'months usage'}</div>
                </div>
                <div class="description">${data.text}</div>
                ${data.image ? `<div class="image" style="background-image: url('${data.image}')"></div>` : ''}
            </div>
        `;
    }

    function updateContent(tab) {
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = ''; // Clear existing content

        const tabContent = tabData[tab];
        let html = '';

        for (const [period, data] of Object.entries(tabContent)) {
            html += createUsageSection(period, data);
        }

        contentDiv.innerHTML = html;

        // Add visibility class with a slight delay for animation
        setTimeout(() => {
            document.querySelectorAll('.usage-section').forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('visible');
                }, index * 200);
            });
        }, 100);
    }

    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
            if (!tab.classList.contains('active')) {
                document.querySelector('.tab.active').classList.remove('active');
                tab.classList.add('active');
                updateContent(tab.dataset.tab);
            }
        });
    });

    // Initialize with weight loss tab
    updateContent('weight-loss');

    // Slider functionality
    const slider = document.querySelector('.tabs');
    let isDown = false;
    let startX;
    let scrollLeft;

    slider.addEventListener('mousedown', (e) => {
        isDown = true;
        slider.classList.add('active');
        startX = e.pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
    });
    slider.addEventListener('mouseleave', () => {
        isDown = false;
        slider.classList.remove('active');
    });
    slider.addEventListener('mouseup', () => {
        isDown = false;
        slider.classList.remove('active');
    });
    slider.addEventListener('mousemove', (e) => {
        if(!isDown) return;
        e.preventDefault();
        const x = e.pageX - slider.offsetLeft;
        const walk = (x - startX) * 3; //scroll-fast
        slider.scrollLeft = scrollLeft - walk;
    });
</script>

<style>
    .results-widget {
        text-align: center;
        max-width: 1200px;
        margin: 0 auto;
    }

    .results-widget h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
    }

    .results-widget h2 span {
        color: #4a90e2;
    }

    .results-widget p {
        margin-bottom: 2rem;
    }

    .results-widget .tabs {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
        overflow-x: auto;
        scrollbar-width: none;
        cursor: grab;
        -webkit-overflow-scrolling: touch;
    }

    .results-widget .tabs::-webkit-scrollbar {
        display: none;
    }

    .results-widget .tab {
        padding: 0.5rem 1rem;
        cursor: pointer;
        background: #EDEDED;
        border: 1px solid #EDEDED;
        border-radius: 100px;
        font-size: 1rem;
        transition: all 0.3s ease;
        white-space: nowrap;
    }

    .results-widget .tab:hover {
        background: #d1d1d1;
    }

    .results-widget .tab.active {
        background-color: black;
        color: white;
    }

    .results-widget .content {
        display: flex;
        flex-direction: column;
        background-color: #F8FCFF;
        max-width: 1000px;
        margin: auto;
        border: 20px solid #EDEDED;
        padding: 2rem;
        border-radius: 15px;
        gap: 3rem;
    }

    .results-widget .usage-section {
        display: flex;
        align-items: center;
        gap: 2rem;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .results-widget .usage-section.visible {
        opacity: 1;
        transform: translateY(0);
    }

    .results-widget .months-usage {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        min-width: 100px;
    }

    .results-widget .usage {
        font-size: 2.5rem;
        font-weight: bold;
        color: #4a90e2;
    }

    .results-widget .description {
        flex: 1;
        padding-left: 1.5rem;
        border-left: 3px solid #EDEDED;
        text-align: start;
        font-size: 1.1rem;
    }

    .results-widget .image {
        width: 180px;
        height: 100px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        transition: transform 0.3s ease;
    }

    .results-widget .image:hover {
        transform: scale(1.1);
    }

    /* Responsive Styles */
    @media screen and (max-width: 768px) {
        .results-widget .tabs {
            justify-content: flex-start;
            padding-bottom: 1rem;
        }

        .results-widget .content {
            padding: 1rem;
        }

        .results-widget .usage-section {
            flex-direction: column;
            gap: 1rem;
        }

        .results-widget .description {
            padding-left: 0;
            border-left: none;
            text-align: center;
        }

        .results-widget .months-usage {
            min-width: auto;
        }
    }
</style>

{% schema %}
  {
    "name": "Results Widget",
    "settings": [],
    "presets": [
      {
        "category": "Page",
        "name": "Results Widget"
      }
    ]
  }
{% endschema %}