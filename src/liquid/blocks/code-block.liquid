{% comment %}
	Renders a code block.

	Accepts:
	- block: The block object containing settings.

	Usage:
	{% render 'code-block', block: block %}
{% endcomment %}

{% if block.settings.block_width_percent %}
	<style>
		#shopify-block-{{ block.id }} {
			width: {{ block.settings.block_width_percent }}% !important;
			flex-basis: {{ block.settings.block_width_percent }}% !important;
		}
	</style>
{% endif %}

<div
	class="code-block-wrapper"
	{{ block.shopify_attributes }}>
	{{ block.settings.content }}
</div>

{% schema %}
	{
		"name": "Code Block",
		"settings": [
			{
				"type": "textarea",
				"id": "content",
				"label": "Code Content (HTML, Liquid, JS, CSS)",
				"info": "Use with caution. Ensure code is valid and secure."
			},
			{
				"type": "select",
				"id": "block_width_percent",
				"label": "Block Width (%)",
				"options": [
					{ "value": "100", "label": "100% (Full)" },
					{ "value": "75", "label": "75% (3/4)" },
					{ "value": "66", "label": "66% (2/3)" },
					{ "value": "50", "label": "50% (Half)" },
					{ "value": "33", "label": "33% (1/3)" },
					{ "value": "25", "label": "25% (1/4)" }
				],
				"info": "Overrides grid width for this block. Leave blank to use section grid."
			}
		],
		"presets": [
			{
				"name": "Code Block"
			}
		]
	}
{% endschema %}
