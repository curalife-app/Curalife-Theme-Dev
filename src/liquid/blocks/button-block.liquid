{% comment %}
	Renders a button block, utilizing the 'button' snippet.

	Accepts:
	- block: The block object containing settings.

	Usage:
	{% render 'button-block', block: block %}
{% endcomment %}

{% if block.settings.block_width_percent %}
	<style>
		#shopify-block-{{ block.id }} {
			width: {{ block.settings.block_width_percent }}% !important;
			flex-basis: {{ block.settings.block_width_percent }}% !important;
		}
	</style>
{% endif %}

<div
	class="button-block-wrapper flex {% if block.settings.button_align == 'center' %}justify-center{% else %}justify-start{% endif %}"
	{{ block.shopify_attributes }}>
	{%
		render 'button',
		button_text: block.settings.button_text,
		button_url: block.settings.button_url,
		button_url_global: block.settings.button_url_global,
		button_icon: block.settings.button_icon,
		button_align: 'start', // Alignment handled by wrapper
		button_style: block.settings.button_style,
		button_text_color: block.settings.button_text_color,
		button_bg_color: block.settings.button_bg_color,
		button_is_new_tab: block.settings.button_is_new_tab,
		button_is_link_to_top: block.settings.button_is_link_to_top,
		button_is_prerender_link: block.settings.button_is_prerender_link,
		button_under_title: block.settings.button_under_title,
		button_under_title_color: block.settings.button_under_title_color,
		button_additional_classes: block.settings.additional_classes,
		button_element_name: block.settings.button_element_name,
		button_id: block.id
	%}
</div>

{% schema %}
	{
		"name": "Button Block",
		"settings": [
			{
				"type": "text",
				"id": "button_text",
				"label": "Button Text",
				"default": "Shop Now"
			},
			{
				"type": "url",
				"id": "button_url",
				"label": "Button URL"
			},
			{
				"type": "url",
				"id": "button_url_global",
				"label": "Button URL on Global (Optional)"
			},
			{
				"type": "text",
				"id": "button_icon",
				"label": "Button Icon Class (Optional)",
				"info": "E.g., 'fas fa-arrow-right' for Font Awesome"
			},
			{
				"type": "text",
				"id": "additional_classes",
				"label": "Button Additional CSS Classes"
			},
			{
				"type": "text",
				"id": "button_element_name",
				"label": "Button Name (for tracking)"
			},
			{
				"type": "color",
				"id": "button_text_color",
				"label": "Button Text Color",
				"default": "#FFFFFF"
			},
			{
				"type": "color",
				"id": "button_bg_color",
				"label": "Button Background Color",
				"default": "#000000"
			},
			{
				"type": "select",
				"id": "button_align",
				"label": "Button Alignment",
				"options": [
					{ "value": "start", "label": "Start (Left/Top)" },
					{ "value": "center", "label": "Center" }
				],
				"default": "start"
			},
			{
				"type": "select",
				"id": "button_style",
				"label": "Button Style",
				"options": [
					{ "value": "solid", "label": "Solid" },
					{ "value": "outline", "label": "Outline" }
				],
				"default": "solid"
			},
			{
				"type": "checkbox",
				"id": "button_is_new_tab",
				"label": "Open link in new tab",
				"default": false
			},
			{
				"type": "checkbox",
				"id": "button_is_link_to_top",
				"label": "Link to top of page",
				"default": false
			},
			{
				"type": "checkbox",
				"id": "button_is_prerender_link",
				"label": "Pre-render link (Use with caution)",
				"default": false
			},
			{
				"type": "header",
				"content": "Under Title (Optional)"
			},
			{
				"type": "text",
				"id": "button_under_title",
				"label": "Text Below Button"
			},
			{
				"type": "color",
				"id": "button_under_title_color",
				"label": "Under Title Color"
			},
			{
				"type": "text",
				"id": "button_under_title_classes",
				"label": "Under Title Additional CSS Classes"
			},
			{
				"type": "select",
				"id": "block_width_percent",
				"label": "Block Width (%)",
				"options": [
					{ "value": "100", "label": "100% (Full)" },
					{ "value": "75", "label": "75% (3/4)" },
					{ "value": "66", "label": "66% (2/3)" },
					{ "value": "50", "label": "50% (Half)" },
					{ "value": "33", "label": "33% (1/3)" },
					{ "value": "25", "label": "25% (1/4)" }
				],
				"info": "Overrides grid width for this block. Leave blank to use section grid."
			}
		],
		"presets": [
			{
				"name": "Button Block"
			}
		]
	}
{% endschema %}
