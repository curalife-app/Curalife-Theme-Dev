{% assign loadOnPages = "/pages/lp-wl-curaslim-360-price,/pages/glucose-support-lp01n-v2,/pages/presell-v2,/pages/presell-maintain-healthy-blood-sugar-lp,/pages/presell-testimonial-lp,/pages/presell-sexual-health-lp,/pages/no-index-page,/pages/curaslim-quiz-results,/pages/lp-wl-curaslim-360,/pages/lp-wl-curaslim-360-aff,/pages/lp-wl-curaslim-360-v2,/pages/lp-wl-curaslim-360-v3,/pages/reasons-why-curalin-for-blood-sugar-maintenance,/pages/lp-glu-4-reasons-select,/pages/lp-glu-curalin-v4-select,/pages/lp-wl-curaslim-prp-select,/pages/lp-wl-curaslim-360-select,/pages/glucose-support-curalin-pack-v4-new" | split: ',' %}
{% assign currentPage = request.path %}

{% if loadOnPages contains currentPage or currentPage contains '/products/' or Activate %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>window.isSwiperLoaded = true;</script>
  <script>console.log("Swiper loaded! (on Liquid)");</script>
{% endif %}


<script>
  // Add a separate flag to track if Swiper is currently being loaded
  window.isSwiperLoading = false;

  function loadSwiper() {
    if (!window.isSwiperLoaded && !window.isSwiperLoading) {
      window.isSwiperLoading = true;

      const link = document.createElement("link");
      link.rel = "stylesheet";
      link.href = "https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css";
      document.head.appendChild(link);

      const script = document.createElement("script");
      script.src = "https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js";
      script.onload = () => {
        window.isSwiperLoaded = true;
        window.isSwiperLoading = false;
        console.log("Swiper loaded! (on JS)");
      };
      document.body.appendChild(script);
    }
  }
</script>
