{% assign benefits = "Free gift in every box!|Enjoy a special surprise with each purchase â€“ a free gift just for you!,
Free Expert Consultations|Enjoy free chats with Naturopathic and Nutrition Doctors to tailor your health plan,
Best Price Guarantee|Enjoy unbeatable value with our best prices guaranteed all year round!,
Cancel, Pause, Delay or Change, Hassle Free|Manage your subscription effortlessly with options to cancel, pause, delay, or change anytime, without any hassle.,
Double & Triple Loyalty Points|At Curalife, you earn loyalty points with every order, which you can use to purchase our products later. As a subscription user, you will enjoy double and triple loyalty points rewards compared to regular orders." | split: "," %}

<div class="subscription-benefits mt-2">
  <h3>Complimentary subscriber benefits:</h3>
  <ul class="benefits-list check">
    {% for benefit in benefits limit: 3 %}
      {% assign benefit_parts = benefit | split: "|" %}
      <li>{{ benefit_parts[1] }}</li>
    {% endfor %}
  </ul>
  <a href="#" id="see-all-benefits" class="see-all-link">See all benefits</a>
</div>

<div id="benefits-modal" class="modal" aria-labelledby="modal-title" aria-hidden="true">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <div class="close-icon" aria-label="Close modal">&times;</div>
    <h2 id="modal-title">Complimentary subscriber benefits:</h2>
    <div id="benefits-list">
      {% for benefit in benefits %}
        {% assign benefit_parts = benefit | split: "|" %}
        <div class="benefit">
          <span class="icon" aria-hidden="true">
            <img src="{{ 'subscription-icon-' | append: forloop.index | append: '.png' | image_url }}" alt="subscription benefit icon" loading="lazy">
          </span>
          <div class="content">
            <h3>{{ benefit_parts[0] }}</h3>
            <p>{{ benefit_parts[1] }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  /* ... (previous CSS remains unchanged) ... */
  .icon img {
    width: 24px;
    height: 24px;
    object-fit: contain;
  }
  .benefit {
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.3s, transform 0.3s;
  }
  .modal.show .benefit {
    opacity: 1;
    transform: translateX(0);
  }
</style>

<script>
  const modal = document.getElementById('benefits-modal');
  const benefitsList = document.getElementById('benefits-list');

  const toggleModal = show => {
    modal.classList.toggle('show', show);
    modal.setAttribute('aria-hidden', !show);
    document.body.style.overflow = show ? 'hidden' : '';

    if (show) {
      setTimeout(() => {
        document.querySelectorAll('.benefit').forEach((benefit, index) => {
          setTimeout(() => benefit.style.transition = 'opacity 0.5s, transform 0.5s', index * 100);
        });
      }, 300);
    }
  };

  const closeIcon = modal.querySelector('.close-icon');
  closeIcon.addEventListener('click', () => toggleModal(false));

  modal.addEventListener('click', event => {
    if (event.target === modal || event.target.classList.contains('modal-backdrop')) {
      toggleModal(false);
    }
  });

  document.getElementById('see-all-benefits').addEventListener('click', (event) => {
    event.preventDefault();
    toggleModal(true);
  });

  document.addEventListener('keydown', event => {
    if (event.key === 'Escape' && modal.classList.contains('show')) toggleModal(false);
  });
</script>